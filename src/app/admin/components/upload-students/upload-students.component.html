<article class="center-center-column pd-24">
    <h3 class="title-3 mb-24"> Subir lista de alumnos </h3>
    <span class="text-normal mb-24">
        Sube el archivo en formato CSV, el archivo debe contener el nombre completo, correo electrónico y número de control.
    </span>

    <form [formGroup]="registerStudentsForm">
        <div [ngClass]="fileSelectedInvalid() ? 'label-form invalid-field center-start-row mb-16'  : 'label-form center-start-row mb-16'">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M19.5 22.5H8.25a1.502 1.502 0 0 1-1.5-1.5v-4.5h1.5V21H19.5V4.5h-6.75V3h6.75A1.502 1.502 0 0 1 21 4.5V21a1.502 1.502 0 0 1-1.5 1.5Z"></path>
                <path d="M18 7.5h-5.25V9H18V7.5Z"></path>
                <path d="M18 11.25h-6v1.5h6v-1.5Z"></path>
                <path d="M18 15h-6.75v1.5H18V15Z"></path>
                <path d="M6.75 14.25A3.754 3.754 0 0 1 3 10.5V2.25h1.5v8.25a2.25 2.25 0 0 0 4.5 0V3.75a.75.75 0 0 0-1.5 0v7.5H6v-7.5a2.25 2.25 0 1 1 4.5 0v6.75a3.754 3.754 0 0 1-3.75 3.75Z"></path>
            </svg>
            <label>Archivo:</label>
        </div>

        <div class="dropzone center-center-column mb-24">
            <p class="text-small small mb-16"> Selecciona o arrastra un archivo </p>
            <div class="file-icon mb-16">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M22.5 18h-3v-3H18v3h-3v1.5h3v3h1.5v-3h3V18Z"></path>
                    <path d="M12 21H6V3h6v4.5A1.504 1.504 0 0 0 13.5 9H18v3h1.5V7.5a.68.68 0 0 0-.225-.525l-5.25-5.25A.682.682 0 0 0 13.5 1.5H6A1.504 1.504 0 0 0 4.5 3v18A1.504 1.504 0 0 0 6 22.5h6V21Zm1.5-17.7 4.2 4.2h-4.2V3.3Z"></path>
                </svg>
            </div>
            <input type="file" required name="uploaded-file" id="upload-file" (change)="onFileSelected($event)">
            <span [ngClass]="fileSelected ? 'text-small small message' : 'text-small  small message-error'">{{ fileSelected ? fileSelected.name : 'Archivo no seleccionado' }}</span>
        </div>

        <div [ngClass]="passwordInvalid() ? 'label-form invalid-field center-start-row mb-16'  : 'label-form center-start-row mb-16'">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M16.125 6.75a1.125 1.125 0 1 0 0-2.25 1.125 1.125 0 0 0 0 2.25Z"></path>
                <path d="M10.81 15H6.75v-4.06l4.523-4.523A4.03 4.03 0 0 1 11.25 6a4.5 4.5 0 1 1 4.5 4.5 3.87 3.87 0 0 1-.417-.023L10.811 15Zm-2.56-1.5h1.94l4.627-4.628.388.072a3.038 3.038 0 1 0-2.399-2.398l.072.387L8.25 11.56v1.94Z"></path>
                <path d="M21 15h-6.75v1.5H21V21H3v-4.5h1.5V15H3a1.502 1.502 0 0 0-1.5 1.5V21A1.502 1.502 0 0 0 3 22.5h18a1.502 1.502 0 0 0 1.5-1.5v-4.5A1.502 1.502 0 0 0 21 15Z"></path>
                <path d="M5.25 19.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z"></path>
            </svg>
            <label>Contraseña:</label>
        </div>

        <div class="password-form center-start-row mb-24">
            <input 
            class="input-form" 
            formControlName="password"
            [type]="showPassword() ? 'text' : 'password'"
            autocomplete="new-password"
            matTooltip="Minimo 1 mayuscula, 1 minuscula, 1 numero y 8 caracteres de longuitud">

            <button (click)="togglePassword()">
                @if(!showPassword()){
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M23.205 11.745A12.517 12.517 0 0 0 12 3.75 12.518 12.518 0 0 0 .795 11.745a.75.75 0 0 0 0 .51A12.517 12.517 0 0 0 12 20.25a12.517 12.517 0 0 0 11.205-7.995.75.75 0 0 0 0-.51ZM12 18.75c-3.975 0-8.175-2.947-9.698-6.75C3.825 8.197 8.025 5.25 12 5.25c3.975 0 8.175 2.947 9.697 6.75-1.522 3.803-5.722 6.75-9.697 6.75Z"></path>
                            <path d="M12 7.5a4.5 4.5 0 1 0 0 9 4.5 4.5 0 0 0 0-9Zm0 7.5a3 3 0 1 1 0-5.999A3 3 0 0 1 12 15Z"></path>
                        </svg>
                }@else{
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="m3.93 16.883 1.072-1.065A10.545 10.545 0 0 1 2.302 12C3.825 8.197 8.025 5.25 12 5.25a9.285 9.285 0 0 1 3 .54l1.162-1.17A11.04 11.04 0 0 0 12 3.75 12.518 12.518 0 0 0 .795 11.745a.75.75 0 0 0 0 .51 12 12 0 0 0 3.135 4.627Z"></path>
                            <path d="M9 11.796a3 3 0 0 1 2.775-2.775l1.357-1.365a4.5 4.5 0 0 0-5.497 5.498L9 11.796Z"></path>
                            <path d="M23.205 11.745a12.3 12.3 0 0 0-4.305-5.58l3.6-3.607L21.442 1.5 1.5 21.442 2.558 22.5l3.825-3.825A11.47 11.47 0 0 0 12 20.25a12.517 12.517 0 0 0 11.205-7.995.75.75 0 0 0 0-.51ZM15 12a3 3 0 0 1-4.5 2.58l4.08-4.08A3 3 0 0 1 15 12Zm-3 6.75a9.788 9.788 0 0 1-4.5-1.185l1.905-1.905a4.5 4.5 0 0 0 6.263-6.262l2.152-2.153A10.906 10.906 0 0 1 21.698 12c-1.523 3.803-5.723 6.75-9.698 6.75Z"></path>
                    </svg>
                }   
            </button>
        </div>

        <div [ngClass]="periodInvalid() ? 'label-form invalid-field center-start-row mb-16'  : 'label-form center-start-row mb-16'">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M19.5 3h-3V1.5H15V3H9V1.5H7.5V3h-3C3.675 3 3 3.675 3 4.5v15c0 .825.675 1.5 1.5 1.5h15c.825 0 1.5-.675 1.5-1.5v-15c0-.825-.675-1.5-1.5-1.5Zm0 16.5h-15V9h15v10.5Zm0-12h-15v-3h3V6H9V4.5h6V6h1.5V4.5h3v3Z"></path>
            </svg>
            <label>Periodo:</label>
        </div>

        <select class="input-form mb-24" [(ngModel)]="period" [ngModelOptions]="{standalone: true}">
            @for(period of periods; track $index; let i = $index;){
                <option [value]="period._id">{{period.periodo}}</option>
            }
        </select>

        <div class="btn-options center-evenly-row">
            <button class="btn-sec hover" (click)="closeDialog()"> Cancelar </button>
            <button class="btn-prim hover" [disabled]="btnDisable()" [disabled]="btnDisable()" (click)="validateForm()"> Registrar </button>
        </div>
    </form>
</article>