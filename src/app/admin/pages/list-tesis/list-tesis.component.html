<section class="center-center-column pd-24">
    <article class="center-center-column container pd-24">
        <h3 class="title-3 mb-24"> Tesis </h3>
        <span class="text-normal mb-24"> Información relacionada a las tesis registradas en el sistema de posgrado del periodo actual </span>

        <div class="actions mb-24">
            <div class="btn-actions">
                <button class="btn-prim center-center-row hover">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19.5 18v3h-15v-3H3v3a1.5 1.5 0 0 0 1.5 1.5h15A1.5 1.5 0 0 0 21 21v-3h-1.5Z"></path>
                        <path d="m19.5 10.5-1.058-1.057-5.692 5.684V1.5h-1.5v13.627L5.558 9.444 4.5 10.5 12 18l7.5-7.5Z"></path>
                    </svg>
                    <span class="text-small">Descargar PDF</span>
                </button>
                <!-- <button class="btn-prim center-center-row hover">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M24 10.5h-3v-3h-1.5v3h-3V12h3v3H21v-3h3v-1.5Z"></path>
                        <path d="M9 3a3.75 3.75 0 1 1 0 7.5A3.75 3.75 0 0 1 9 3Zm0-1.5A5.25 5.25 0 1 0 9 12 5.25 5.25 0 0 0 9 1.5Z"></path>
                        <path d="M16.5 22.5H15v-3.75A3.75 3.75 0 0 0 11.25 15h-4.5A3.75 3.75 0 0 0 3 18.75v3.75H1.5v-3.75a5.25 5.25 0 0 1 5.25-5.25h4.5a5.25 5.25 0 0 1 5.25 5.25v3.75Z"></path>
                    </svg>
                    <span class="text-small">Registrar asesor</span>
                </button> -->
            </div>

            <select class="select-filter" [(ngModel)]="period" (ngModelChange)="getAllTesis()" [ngModelOptions]="{standalone: true}">
                @for(period of periods; track $index; let i = $index;){
                    <option [value]="period.periodo">{{period.periodo}}</option>
                }
            </select>

            <!-- [(ngModel)]="searchTerm" 
            (input)="onSearch(searchTerm)"  -->
            <div class="input-search">
                <input type="text" 
                placeholder="Buscar por alumno o titulo de tesis">

                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="m21.75 20.692-5.664-5.664a8.264 8.264 0 1 0-1.06 1.061l5.664 5.664 1.06-1.06ZM3 9.753a6.75 6.75 0 1 1 6.75 6.75A6.758 6.758 0 0 1 3 9.753Z"></path>
                </svg>
            </div>
        </div>

        @if(tesis.length >= 1){
            @defer(on timer(2000ms)){
              <main class="mb-16">
                <table>
                  <thead>
                    <tr>
                      <th class="text-normal">No</th>
                      <th class="text-normal">Nombre</th>
                      <th class="text-normal">Tesis</th>
                      <th class="text-normal">Asesor</th>
                      <th class="text-normal">Fecha Entrega</th>
                      <th class="text-normal">Estatus</th>
                      <th class="text-normal">Aprobada por</th>
                      <th class="text-normal">Fecha aprobación</th>
                      <!-- <th class="text-normal">Opciones</th> -->
                    </tr>
                  </thead>
                  <tbody>
                    @for(tesis of tesis; track $index; let i = $index){
                      <tr>
                        <td class="text-small">{{ $index + 1 }}</td>
                        <td class="text-small">{{tesis.nombreAlumno}}</td>
                        <td class="text-small">{{tesis.titulo}}</td>
                        <td class="text-small">{{tesis.nombreAsesor}}</td>
                        <td class="text-small">{{tesis.fechaEntrega || 'No preaprobada'}}</td>
                        <td class="text-small">{{tesis.estatus}}</td>
                        <td class="text-small">{{tesis.aprobacion.nombre || 'Aprobacion pendiente'}}</td>
                        <td class="text-small">{{tesis.aprobacion.fechaAprobacion || 'Aprobacion pendiente' }}</td>
                        <!-- <td class="text-small">
                          <button class="btn-icon hover" 
                          (click)="deleteStudent(student._id)"
                          matTooltip="Eliminar asesor"> 
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                              <path d="M10.5 9H9v9h1.5V9Z"></path>
                              <path d="M15 9h-1.5v9H15V9Z"></path>
                              <path d="M3 4.5V6h1.5v15A1.5 1.5 0 0 0 6 22.5h12a1.5 1.5 0 0 0 1.5-1.5V6H21V4.5H3ZM6 21V6h12v15H6Z"></path>
                              <path d="M15 1.5H9V3h6V1.5Z"></path>
                            </svg>
                          </button>
                        </td> -->
                      </tr>
                    }
                  </tbody>
                </table>
              </main>
              
              <!-- @if(pagination.totalPages > 1){
                <div class="pagination center-center-row">
                  <button class="btn-prev" 
                  [disabled]="pagination.page === 1" 
                  (click)="changePage(pagination.page - 1)">
                  Ant
                  </button>
                  @for (page of pages; track $index){
                    <button [ngClass]="pagination.page === page ? 'btn-page current-page'  : 'btn-page'"
                    (click)="changePage(page)">
                      {{page}}
                    </button>
                  }
                  <button class="btn-next" 
                  [disabled]="pagination.totalPages === pagination.page"
                  (click)="changePage(pagination.page + 1)">
                  Sig
                  </button>
                </div>
              } -->
            }@placeholder(minimum 2s;){
              <div class="center-center-column loading">
                <div class="loader"></div>
                <span class="text-small mt-24"> Cargando informacion  </span>
              </div>
            }
        }@else if (tesis.length === 0 && requestCompleted()){
          <div class="center-center-column empty">
            <span class="text-small"> Por el momento aun no hay tesis registradas en este periodo </span>
          </div>
        }


    </article>
</section>